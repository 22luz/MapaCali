
	<!DOCTYPE html>
<html>
	<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	
	<link rel="stylesheet" href="https://npmcdn.com/leaflet@1.0.0-rc.1/dist/leaflet.css" />

	
	<link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.css" rel="stylesheet"/>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.EasyButton/2.4.0/easy-button.css" />


	<link rel="stylesheet" href="https://leaflet.github.io/Leaflet.draw/src/leaflet.draw.css"/>
	
	<link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

	<title>Ejemplo 3</title>
	
	
	
	<style>
	*{	
		padding: 0% ;
		margin: 0% 0%;		
	}
	html, body{
	height:100% ;
	width:100% vw;
	}
	
	
	#map{

	width:100%;
	height:100%;}


	</style>
	
	
	
	</head>	
	<body>


			<div id="map" style="z-index:0">
				
			
			</div>


	</body>
	
	
	<script src="https://npmcdn.com/jquery@3.0.0/dist/jquery.min.js"></script>
	<script src="https://npmcdn.com/leaflet@1.0.0-rc.1/dist/leaflet.js"></script>
	
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.EasyButton/2.4.0/easy-button.js"></script>
	<script src="posiciÃ³n/src/L.Control.Locate.js" ></script>
	<script src="https://kit.fontawesome.com/02eb88b373.js" crossorigin="anonymous"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.js"></script>
	<script src="spin/spin.min.js" charset="utf-8"></script>
	<script src="spin/leaflet.spin.min.js" charset="utf-8"></script>
	<script src="print/dist/bundle.js"></script>
	<script>
	
	
	
	var map = L.map('map',
	{
		zoom: 10
	}).setView([3.42335,-76.52086], 12);           ////SE INSERTA UN MAPA EN EL DIV "map" con coordenadas 3.42335,-76.52086
	
	
	var mapabase = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', 
		{
			maxZoom: 15,
			attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
		});
	
	var mapabase2 = L.tileLayer('https://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png', 
		{
			maxZoom: 18,
			attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
		})
	
    
	mapabase.addTo(map);
	
	L.control.scale({position:'bottomleft'}).addTo(map)	;
	L.control.layers({mapabase,mapabase2}).addTo(map);
    var comunas = L.tileLayer.wms('http://idesc.cali.gov.co:8081/geoserver/wms?service=WMS&version=1.1.0',
		{
		layers: 'idesc:mc_comunas',
		format: 'image/png',
		transparent: true,
		});
		map.addLayer(comunas);
	var corredores = L.tileLayer.wms('http://idesc.cali.gov.co:8081/geoserver/wms?service=WMS&version=1.1.0',
		{
		layers: 'amb_eep_corredores_ambientales',
		format: 'image/png',
		transparent: true,
		});
		map.addLayer(corredores);
		var estrato = L.tileLayer.wms('http://idesc.cali.gov.co:8081/geoserver/wms?service=WMS&version=1.1.0',
		{
		layers: 'est_estrato_social_lado_manzana',
		format: 'image/png',
		transparent: true,
		});
		map.addLayer(estrato);

	var vallas = L.tileLayer.wms('http://idesc.cali.gov.co:8081/geoserver/wms?service=WMS&version=1.1.0',
		{
		layers: 'mc_vallas_publicitarias',
		format: 'image/png',
		transparent: true,
		});
		map.addLayer(vallas);
    
	
    


	leyenda.addOverlay(estrato, 'Estrato');
	leyenda.addOverlay(vallas, 'Vallas Publicitarias');
	leyenda.addOverlay(corredores, 'Corredores Ambientales');
	leyenda.addOverlay(comunas, 'Comunas');





	var drawnItems = new L.FeatureGroup();

			var drawControl = new L.Control.Draw({
				position: 'topleft',
				edit: {
					featureGroup: drawnItems,
					remove: true,
					edit: false,
				},
				draw: {
					circlemarker: true,
					circle:false,
					rectangle:false,
					marker:true,
				}
			});
			map.addControl(drawControl);
			
	map.on(L.Draw.Event.CREATED, function (e) {
			    var type = e.layerType,
			        layer = e.layer;

			    if (type === 'marker') {
			        layer.bindPopup('A popup!');
			    }

			    drawnItems.addLayer(layer);
				map.addLayer(drawnItems);
			});

	
	map.spin(true);


	var printer = L.easyPrint({
      		tileLayer: mapabase,
      		sizeModes: ['Current', 'A4Landscape', 'A4Portrait'],
      		filename: 'myMap',
      		exportOnly: true,
      		hideControlContainer: true
		}).addTo(map);

		function manualPrint () {
			printer.printMap('CurrentSize', 'MyManualPrint')
		}
    	

	</script>
	
</html> 
